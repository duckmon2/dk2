<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Black Wing</title>

  <style>
    :root{
      --bg:#07090d;
      --panel:rgba(255,255,255,.06);
      --panel2:rgba(255,255,255,.04);
      --line:rgba(255,255,255,.08);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --muted2:rgba(255,255,255,.45);
      --shadow: 0 30px 90px rgba(0,0,0,.55);
      --r:18px;
      --r2:14px;

      --accent:#ffcc00; /* ê¸°ë³¸(ìŠˆì¦ˆë€) */
      --accentHosen:#56b6ff; /* âœ… í˜¸ì…(íƒ­/ë¼ë²¨ íŒŒë‘) */
      --accentBuso:#b58cff;  /* âœ… ë¬´ì¥ì „ì„ (íƒ­/ë¼ë²¨ ë³´ë¼) */

      /* âœ… WORLD PANEL ACCENTS (ìš”ì²­: ë¹¨ê°• -> ë…¸ë‘ -> ì´ˆë¡) */
      --wRed:#ff3b3b;
      --wYel:#ffcc00;
      --wGrn:#45d36a;

      /* âœ… FACTION PANEL ACCENTS (ìš”ì²­: ìŠˆì¦ˆë€ ê²€ì •, í˜¸ì… íŒŒë‘, ë¬´ì¥ì „ì„  ë³´ë¼) */
      --fSuz:#0b0d12;  /* ê±°ì˜ ë¸”ë™ */
      --fHos:#56b6ff;  /* íŒŒë‘ */
      --fBus:#b58cff;  /* ë³´ë¼ */
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 50% 0%, rgba(255,255,255,.06), transparent 65%),
        radial-gradient(900px 500px at 20% 40%, rgba(255,255,255,.04), transparent 60%),
        var(--bg);
      overflow-x:hidden;
      scroll-behavior:smooth;
    }

    html.scrollLock, body.scrollLock{
      height:100%;
      overflow:hidden;
      overscroll-behavior:none;
      touch-action:none;
    }

    /* =========================
       âœ… MAIN VIDEO BG (ENTER ì´í›„)
       ========================= */
    .mainVideoBg{
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      opacity: 0;
      transition: opacity .75s ease;
      overflow: hidden;
    }
    body.entered .mainVideoBg{
      opacity: 1;
    }
    .mainVideoBg video{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display:block;
      filter: blur(6px) brightness(0.55) saturate(1.05);
      transform: scale(1.06);
    }
    .mainVideoBg::before{
      content:"";
      position:absolute; inset:0;
      background: rgba(0,0,0,0.20);
      z-index: 1;
    }
    .mainVideoBg::after{
      content:"";
      position:absolute; inset:-40px;
      background: radial-gradient(ellipse at center,
        rgba(0,0,0,0.05) 0%,
        rgba(0,0,0,0.35) 72%,
        rgba(0,0,0,0.55) 100%);
      pointer-events:none;
      z-index: 2;
    }

    /* ê¸°ì¡´ ë ˆì´ì–´ë“¤ì´ ë¹„ë””ì˜¤ë³´ë‹¤ ìœ„ */
    .wrap{ position: relative; z-index: 1; }
    .cover{ z-index: 1200; }

    .cover{
      position: fixed;
      inset: 0;
      z-index: 1200;
      background-image: url("assets/bg-school.png");
      background-size: cover;
      background-position: center;
      background-repeat:no-repeat;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
      overflow:hidden;

      opacity: 1;
      transform: translateY(0) scale(1);
      transition: opacity .75s ease, transform .75s ease, filter .75s ease;
      will-change: opacity, transform, filter;
    }
    .cover::before{
      content:"";
      position:absolute; inset:0;
      background: rgba(0,0,0,0.55);
    }
    .cover::after{
      content:"";
      position:absolute; inset:-40px;
      background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.55) 70%, rgba(0,0,0,0.88) 100%);
      pointer-events:none;
    }
    .cover.hidden{
      opacity: 0;
      transform: translateY(-10px) scale(1.01);
      filter: blur(2px);
      pointer-events:none;
    }

    .coverCard{
      position:relative;
      z-index:1;
      width: min(820px, 92vw);
      text-align:center;
      padding: 22px 18px;
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 18px;
      background: rgba(0,0,0,0.32);
      backdrop-filter: blur(8px);
      box-shadow: 0 20px 60px rgba(0,0,0,.65);
    }
    .logo{
      width: min(520px, 78vw);
      max-height: 32svh;
      object-fit: contain;
      display:block;
      margin: 2px auto 14px;
      filter: drop-shadow(0 12px 32px rgba(0,0,0,0.85));
    }
    .coverTitle{
      margin: 6px 0 10px;
      font-weight: 1000;
      letter-spacing: 0.22em;
      font-size: clamp(22px, 5.2vw, 44px);
      line-height:1.1;
    }
    .coverDesc{
      margin: 0 auto 18px;
      max-width: 56ch;
      color: rgba(255,255,255,0.88);
      line-height: 1.65;
      font-size: clamp(13px, 3.2vw, 16px);
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 12px 18px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.20);
      background: rgba(0,0,0,0.38);
      color:#fff;
      text-decoration:none;
      font-weight: 1000;
      letter-spacing: 0.10em;
      user-select:none;
      cursor:pointer;
      transition:.15s ease;
    }
    .btn:hover{ background: rgba(255,255,255,0.10); }

    .wrap{
      width:min(1120px, calc(100% - 44px));
      margin:0 auto;
      padding:46px 0 90px;

      opacity: 0;
      transform: translateY(10px);
      transition: opacity .75s ease, transform .75s ease;
      will-change: opacity, transform;
    }
    body.entered .wrap{
      opacity: 1;
      transform: translateY(0);
    }

    .sectionTitle{
      letter-spacing:.34em;
      text-transform:uppercase;
      font-size:12px;
      color:var(--muted2);
      margin:42px 0 14px;
      padding-top:22px;
      border-top:1px solid rgba(255,255,255,.06);
    }

    .worldCard{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08);
      border-radius: var(--r);
      padding:18px 18px;
      box-shadow: 0 16px 60px rgba(0,0,0,.35);
    }

    .worldToggleRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:4px;
    }
    .worldToggleBtn{
      appearance:none;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.82);
      padding:8px 12px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:900;
      font-size:12px;
      letter-spacing:.12em;
      display:flex;
      align-items:center;
      gap:8px;
      transition:.15s ease;
      user-select:none;
    }
    .worldToggleBtn::before{
      content:"";
      width:7px; height:7px; border-radius:50%;
      background: rgba(255,255,255,.35);
    }
    .worldToggleBtn.active{
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.06);
    }
    .worldToggleBtn.active::before{
      background: rgba(255,255,255,.82);
    }

    .archivePanel{
      margin-top:14px;
      min-height: 14px;
    }

    .tabs{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }
    .tabBtn{
      appearance:none; border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.82);
      padding:8px 12px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:900;
      font-size:12px;
      letter-spacing:.12em;
      display:flex;
      align-items:center;
      gap:8px;
      transition:.15s ease;
    }
    .tabBtn::before{
      content:"";
      width:7px; height:7px; border-radius:50%;
      background: rgba(255,255,255,.35);
    }
    .tabBtn.active{
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.06);
    }
    .tabBtn.active::before{ background: var(--accent); }
    .tabBtn[data-f="HOSEN"].active::before{ background: var(--accentHosen); }
    .tabBtn[data-f="BUSO"].active::before{ background: var(--accentBuso); }

    .groupHead{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:10px;
      margin:22px 0 10px;
    }
    .groupName{
      font-weight:1000;
      letter-spacing:.22em;
      font-size:14px;
      color: rgba(255,255,255,.9);
    }
    .groupCount{
      font-size:12px;
      color: var(--muted2);
      letter-spacing:.16em;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:14px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns: repeat(3,1fr);} }
    @media (max-width: 720px){ .grid{grid-template-columns: repeat(2,1fr);} }
    @media (max-width: 420px){ .grid{grid-template-columns: 1fr;} }

    .charCard{
      position:relative;
      border-radius: var(--r2);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      cursor:pointer;
      min-height: 250px;
      box-shadow: 0 14px 45px rgba(0,0,0,.35);
      transition: transform .12s ease, border-color .12s ease;
      isolation:isolate;
    }
    .charCard:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.18);
    }

    .thumb{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform: scale(1.01);
      transition: filter .22s ease, transform .22s ease;
      filter: contrast(1.03) saturate(1.05);
    }

    .charCard.locked .thumb{
      filter: grayscale(1) saturate(0.25) contrast(1.08) brightness(0.78);
      transform: scale(1.015);
    }
    .charCard.locked::after{
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      opacity:.55;
      background:
        repeating-linear-gradient(
          0deg,
          rgba(255,255,255,.04) 0px,
          rgba(255,255,255,.04) 1px,
          rgba(0,0,0,0) 2px,
          rgba(0,0,0,0) 4px
        ),
        radial-gradient(600px 260px at 30% 30%, rgba(255,255,255,.06), transparent 55%),
        radial-gradient(520px 240px at 70% 60%, rgba(255,255,255,.05), transparent 60%);
      mix-blend-mode: overlay;
      z-index:2;
    }
    .charCard.locked:hover .thumb{
      filter: grayscale(.45) saturate(.55) contrast(1.1) brightness(0.86);
    }
    .charCard.locked:hover::after{ opacity:.35; }

    .charCard.peek .thumb{
      filter: contrast(1.03) saturate(1.05) !important;
      transform: scale(1.01);
    }
    .charCard.peek::after{ opacity: 0 !important; }

    .charCard.revealFlash{ animation: cardPop .30s ease; }
    @keyframes cardPop{
      0%{ transform: translateY(0) scale(1); }
      60%{ transform: translateY(-2px) scale(1.01); }
      100%{ transform: translateY(0) scale(1); }
    }
    .charCard.revealFlash .thumb{ animation: thumbFlash .34s ease; }
    @keyframes thumbFlash{
      0%{ filter: grayscale(1) saturate(.2) contrast(1.2) brightness(0.9); }
      35%{ filter: grayscale(.2) saturate(1.2) contrast(1.25) brightness(1.18); }
      100%{ filter: contrast(1.03) saturate(1.05); }
    }
    .charCard.revealFlash .glitchOverlay{
      opacity:1;
      animation: glitchFade .38s ease forwards;
    }
    @keyframes glitchFade{
      0%{ opacity:1; transform: translateX(-2px); }
      60%{ opacity:.55; transform: translateX(2px); }
      100%{ opacity:0; transform: translateX(0); }
    }
    .glitchOverlay{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      z-index:5;
      mix-blend-mode: screen;
      background:
        linear-gradient(90deg,
          rgba(255,0,90,.18),
          rgba(0,220,255,.12),
          rgba(255,255,255,.06)
        ),
        repeating-linear-gradient(
          90deg,
          rgba(255,255,255,.05) 0px,
          rgba(255,255,255,.05) 1px,
          rgba(0,0,0,0) 2px,
          rgba(0,0,0,0) 6px
        );
    }

    .charOverlay{
      position:absolute; inset:auto 0 0 0;
      padding:12px 12px 10px;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.60) 35%, rgba(0,0,0,.82));
      z-index:6;
    }
    .charId{
      font-weight:1000;
      letter-spacing:.1em;
      font-size:12px;
      color: rgba(255,255,255,.9);
    }
    .charLine{
      margin-top:4px;
      font-size:12px;
      color: rgba(255,255,255,.72);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.78);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
      z-index:999;
      backdrop-filter: blur(10px);
    }
    .backdrop.show{ display:flex; }

    .modal{
      width:min(980px, 100%);
      border-radius: 22px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(10,12,16,.94);
      box-shadow: var(--shadow);
      position:relative;
      z-index:2;
      transform: translateY(6px) scale(.99);
      opacity:0;
      transition: .18s ease;
    }
    .backdrop.show .modal{
      transform: translateY(0) scale(1);
      opacity:1;
    }

    .closeBtn{
      position:absolute;
      top:14px; right:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      color: rgba(255,255,255,.9);
      border-radius: 999px;
      padding:10px 14px;
      font-weight:1000;
      letter-spacing:.12em;
      cursor:pointer;
      z-index:3;
    }

    .modalGrid{
      display:grid;
      grid-template-columns: 360px 1fr;
      min-height: 560px;
    }

    /* âœ… (ì›ë³¸ ìœ ì§€) */
    @media (max-width: 860px){
      .modal{
        height: 100svh;
        max-height: 100svh;
      }

      .modalGrid{
        display: flex;
        flex-direction: column;
        height: 100%;
        min-height: 0;
      }

      .modalLeft{
        flex: 0 0 auto;
        border-right: none;
        border-bottom: 1px solid rgba(255,255,255,.08);
      }

      .portraitWrap{
        max-height: 26svh !important;
        height: auto;
      }

      .portrait{
        object-fit: contain;
      }

      .modalRight{
        flex: 1 1 auto;
        min-height: 0;
        overflow-y: auto;
        padding-bottom: 32px;
      }
    }

    .portraitWrap{
      width:100%;
      height:100%;
      max-height: 560px;
      border-radius: 18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.35);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .portrait{
      width:100%;
      height:100%;
      object-fit: contain;
      display:block;
      filter: contrast(1.03) saturate(1.05);
    }

    .modalRight{ padding:18px 18px 20px; }

    /* âœ…âœ…âœ… [ì—¬ê¸°ë¶€í„°ê°€ "ì§¤ë¦¼ ì œê±°" ìˆ˜ì • í•µì‹¬: ì•„ë˜ì— ì¶”ê°€/ë®ì–´ì“°ê¸°] */
    @media (max-width: 860px){
      /* 1) ëª¨ë°”ì¼ì—ì„œ backdrop íŒ¨ë”© ë•Œë¬¸ì— í™”ë©´ì´ ì¤„ì–´ë“¤ë©° ì˜ë¦¬ëŠ” í˜„ìƒ ë°©ì§€ */
      .backdrop{
        padding: 0 !important;
        align-items: stretch !important;
        justify-content: stretch !important;
      }

      /* 2) ëª¨ë‹¬ì„ í™”ë©´ì— ê½‰ ì±„ìš°ê³ (ìƒë‹¨ ì˜ë¦¼ ë°©ì§€), ë¼ìš´ë“œ ì œê±° */
      .modal{
        width: 100% !important;
        height: 100svh !important;
        max-height: 100svh !important;
        border-radius: 0 !important;
      }

      /* 3) ìƒë‹¨ ì´ë¯¸ì§€ ì˜ì—­ "í™• ì¤„ì´ê¸°" + ì•„ë˜ ê¸°ë³¸ portraitWrap(560px/100%) ë®ì–´ì“°ê¸° í™•ì • */
      .portraitWrap{
        height: 44svh !important;
        max-height: 44svh !important;
      }

      /* ìŠ¤í¬ë¡¤ ë¶€ë“œëŸ½ê²Œ */
      .modalRight{
        -webkit-overflow-scrolling: touch;
      }
    }
    /* âœ…âœ…âœ… [ìˆ˜ì • ë] */

    .labelRow{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-top:2px;
    }
    .factionLabel{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:1000;
      font-size:12px;
      letter-spacing:.14em;
      padding:7px 10px;
      border-radius: 8px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.12);
    }
    .factionDot{
      width:9px; height:9px;
      border-radius:50%;
      background: var(--accent);
      box-shadow: 0 0 0 3px rgba(255,204,0,.15);
    }
    .factionDot.blue{
      background: var(--accentHosen);
      box-shadow: 0 0 0 3px rgba(86,182,255,.18);
    }
    .factionDot.red{
      background: var(--accentBuso);
      box-shadow: 0 0 0 3px rgba(181,140,255,.18);
    }

    .idLabel{
      display:inline-flex;
      align-items:center;
      font-weight:1000;
      font-size:12px;
      letter-spacing:.14em;
      padding:7px 10px;
      border-radius: 8px;
      background: rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.88);
    }

    .nameKR{
      font-size:44px;
      font-weight:1000;
      letter-spacing:-.02em;
      line-height:1.05;
      margin:12px 0 6px;
    }
    .nameEN{
      font-size:20px;
      font-weight:900;
      letter-spacing:.06em;
      margin:0 0 14px;
      color: rgba(255,255,255,.75);
    }
    @media (max-width: 720px){
      .nameKR{ font-size:36px; }
      .nameEN{ font-size:18px; }
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:12px;
      margin-top:10px;
    }
    @media (max-width: 520px){
      .cards{ grid-template-columns: 1fr; }
    }

    .infoCard{
      background: rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      overflow:hidden;
    }
    .infoHead{
      padding:12px 14px;
      background: rgba(0,0,0,.18);
      border-bottom:1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .infoTitle{
      font-weight:1000;
      letter-spacing:.16em;
      font-size:12px;
      color: rgba(255,255,255,.86);
      text-transform:uppercase;
    }
    .infoBody{
      padding:12px 14px 14px;
      color: rgba(255,255,255,.86);
      line-height:1.6;
      font-size:14px;
    }

    .kv{
      display:grid;
      grid-template-columns: 120px 1fr;
      gap:8px 12px;
      font-size:14px;
      line-height:1.6;
    }
    .k{
      color: rgba(255,255,255,.55);
      font-weight:1000;
      letter-spacing:.02em;
      word-break: keep-all;
    }
    .v{
      color: rgba(255,255,255,.90);
      word-break: keep-all;
      overflow-wrap: normal;
    }

    .noteWide{ grid-column: 1 / -1; }

    .quoteBox{
      border-left: 4px solid var(--quoteColor, var(--accent));
      background: rgba(0,0,0,.18);
      padding: 14px 14px;
      border-radius: 12px;
      line-height: 1.65;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      white-space: pre-line;
      color: var(--quoteColor, var(--accent));
      font-style: italic;
      letter-spacing: -.01em;
    }
    .qMark{
      color: var(--quoteColor, var(--accent));
      font-weight: 1000;
    }

    /* âœ… ì†Œì† íƒ­ ì „ìš© */
    .fPanelGrid{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .fCard{
      background: var(--panel2);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 14px;
      padding: 14px 14px 15px;
      box-shadow: 0 14px 50px rgba(0,0,0,.28);
      position:relative;
      overflow:hidden;
    }
    .fCard::after{
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      background:
        radial-gradient(900px 260px at 30% 20%, rgba(255,255,255,.05), transparent 60%),
        radial-gradient(760px 240px at 80% 70%, rgba(255,255,255,.04), transparent 60%);
      opacity:.8;
      mix-blend-mode: overlay;
    }
    .fHeadRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      position:relative;
      z-index:1;
    }
    .fBadgeRow{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .fBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius: 10px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.10);
      font-weight:1000;
      letter-spacing:.08em;
    }
    .fTag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.72);
      font-weight: 900;
      letter-spacing: .06em;
      font-size: 12px;
    }
    .fMeta{
      color: rgba(255,255,255,.45);
      font-size:12px;
      letter-spacing:.12em;
    }
    .fBody{
      margin-top:10px;
      color: rgba(255,255,255,.80);
      line-height:1.85;
      font-size:14px;
      position:relative;
      z-index:1;
    }
    .fBody p{ margin:0 0 10px; }
    .fBody p:last-child{ margin:0; }
    .fKey{
      color: rgba(255,255,255,.92);
      font-weight:1000;
    }
    .fRule{
      margin-top:12px;
      padding: 12px 12px;
      border-radius: 12px;
      background: rgba(0,0,0,.18);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      white-space: pre-line;
      font-style: italic;
      letter-spacing: -.01em;
    }

    /* âœ… BGM íŒ¨ë„ (ì¶”ê°€) */
    .bgmGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 720px){
      .bgmGrid{ grid-template-columns: 1fr; }
    }
    .bgmCard{
      background: var(--panel2);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 14px;
      padding: 14px 14px 15px;
      box-shadow: 0 14px 50px rgba(0,0,0,.28);
      position:relative;
      overflow:hidden;
    }
    .bgmCard::after{
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      background:
        radial-gradient(900px 260px at 30% 20%, rgba(255,255,255,.05), transparent 60%),
        radial-gradient(760px 240px at 80% 70%, rgba(255,255,255,.04), transparent 60%);
      opacity:.75;
      mix-blend-mode: overlay;
    }
    .bgmHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      position:relative;
      z-index:1;
      margin-bottom:10px;
    }
    .bgmTitle{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius: 10px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.10);
      font-weight:1000;
      letter-spacing:.08em;
    }
    .bgmMeta{
      color: rgba(255,255,255,.45);
      font-size:12px;
      letter-spacing:.12em;
    }
    .bgmBody{
      position:relative;
      z-index:1;
      color: rgba(255,255,255,.80);
      line-height:1.75;
      font-size:14px;
    }
    .bgmRow{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .bgmBtn{
      appearance:none;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.88);
      padding:10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight:1000;
      letter-spacing:.08em;
      transition:.15s ease;
      user-select:none;
    }
    .bgmBtn:hover{ background: rgba(255,255,255,.08); }
    .bgmRange{
      display:flex;
      align-items:center;
      gap:10px;
      width:min(520px, 100%);
      padding:10px 12px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .bgmRange input[type="range"]{
      width: 220px;
      max-width: 100%;
    }
    .bgmSmall{
      color: rgba(255,255,255,.55);
      font-size:12px;
      letter-spacing:.06em;
    }

    @media (max-width: 520px){
      .wrap{ width: min(1120px, calc(100% - 28px)); }
      .closeBtn{ top:12px; right:12px; }
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; scroll-behavior:auto !important; }
    }
  </style>
</head>

<body>
  <!-- âœ… ENTER ì´í›„ì—ë§Œ ë³´ì´ëŠ” ì›€ì§ì´ëŠ” ë°°ê²½ (ë¬´ì¡°ê±´ ë¬´ìŒ) -->
  <div class="mainVideoBg" aria-hidden="true">
    <video
      id="mainBgVideo"
      src="assets/main-bg.mp4"
      muted
      playsinline
      loop
      preload="auto"
    ></video>
  </div>

  <audio id="bgm" preload="auto">
    <source src="assets/bgm/reborn.mp3" type="audio/mpeg">
  </audio>

  <section class="cover" id="top">
    <div class="coverCard">
      <img class="logo" src="assets/banner.png" alt="Black Wing Logo" />
      <div class="coverTitle">BLACK WING</div>

      <!-- âœ… ì‚­ì œë¨: coverDesc í•œê¸€ ì„¤ëª… -->

      <a class="btn" id="enterBtn" href="#main">ENTER</a>
    </div>
  </section>

  <div class="wrap" id="main">
    <!-- âœ… WORLD -> SELECT ARCHIVE -->
    <div class="sectionTitle">SELECT ARCHIVE</div>

    <div class="worldCard">
      <div class="worldToggleRow">
        <button class="worldToggleBtn" id="worldTabBtn" type="button">ì„¸ê³„ê´€ğŸŒ</button>
        <button class="worldToggleBtn" id="factionTabBtn" type="button">ì†Œì†ğŸ³ï¸â€</button>
        <button class="worldToggleBtn" id="charTabBtn" type="button">ë“±ì¥ì¸ë¬¼ğŸ‘¥ï¸</button>
        <!-- âœ… ì¶”ê°€: BGM íƒ­ -->
        <button class="worldToggleBtn" id="bgmTabBtn" type="button">BGMğŸµ</button>
      </div>

      <!-- âœ… ì„¸ê³„ê´€ ëˆŒë €ì„ ë•Œë§Œ ë³´ì„ (ê¸°ì¡´ ê·¸ëŒ€ë¡œ) -->
      <div class="archivePanel" id="worldPanel" style="display:none;">
        <div style="display:flex; flex-direction:column; gap:12px;">

          <!-- =========================
               ğŸ“ BLACK WING ì•„ì¹´ì´ë¸Œ (RED)
               ========================= -->
          <div style="
            background: var(--panel2);
            border: 1px solid rgba(255,255,255,.08);
            border-radius: 14px;
            padding: 14px 14px 15px;
            border-left: 6px solid var(--wRed);
          ">
            <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
              <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
                <div style="
                  display:inline-flex; align-items:center; gap:8px;
                  padding:7px 10px;
                  border-radius: 10px;
                  background: rgba(0,0,0,.22);
                  border: 1px solid rgba(255,255,255,.10);
                  font-weight:1000;
                  letter-spacing:.08em;
                ">
                  <span aria-hidden="true">ğŸ“</span>
                  <span>BLACK WING ì•„ì¹´ì´ë¸Œ</span>
                </div>

                <div style="
                  display:inline-flex; align-items:center; gap:8px;
                  padding:6px 10px;
                  border-radius: 999px;
                  background: rgba(255,255,255,.06);
                  border: 1px solid rgba(255,255,255,.10);
                  color: rgba(255,255,255,.78);
                  font-weight: 900;
                  letter-spacing: .06em;
                  font-size: 12px;
                ">
                  <span aria-hidden="true">âœ…</span>
                  <span>í˜„ì¥ ìš”ì•½</span>
                </div>
              </div>

              <div style="color: rgba(255,255,255,.45); font-size:12px; letter-spacing:.12em;">
                ARCHIVE
              </div>
            </div>

            <div style="margin-top:10px; color: rgba(255,255,255,.78); line-height:1.8; font-size:14px;">
              <p style="margin:0 0 10px;">
                <b style="color: rgba(255,255,255,.92);">ì•„ì´ì¹˜í˜„ ì™¸ê³½.</b>
                ë²„ë ¤ì§„ ê³µì—…ì§€ëŒ€ì™€ ë‚¡ì€ ê³¨ëª©ì´ ì´ì–´ì§„ ë„ì‹œë‹¤.
              </p>

              <p style="margin:0 0 10px;">
                ê²‰ìœ¼ë¡œëŠ” í‰ë²”í•œ ì§€ë°© ë„ì‹œì²˜ëŸ¼ ë³´ì´ì§€ë§Œ,
                <b style="color: rgba(255,255,255,.92);">ë°¤ì´ ë˜ë©´ ì „í˜€ ë‹¤ë¥¸ ì–¼êµ´</b>ì„ ë“œëŸ¬ë‚¸ë‹¤.
              </p>

              <p style="margin:0 0 10px;">
                ì´ê³³ì˜ í•™êµëŠ” ë” ì´ìƒ êµìœ¡ ê¸°ê´€ì´ ì•„ë‹ˆë‹¤.
                <b style="color: rgba(255,255,255,.92);">ì‹¸ì›€ê³¼ í­ë ¥</b>,
                <span style="color: var(--wYel); font-weight:1000;">í¡ì—°Â·ë¬¸ì‹ Â·ë„ë°•</span>ê¹Œì§€â€”
                ê·¸ ì–´ë–¤ ê²ƒì—ë„ ì œì¬ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
              </p>

              <p style="margin:0 0 10px;">
                ê²½ì°°ë„, êµì‚¬ë„, ì–´ë¥¸ë„ ì´ë¯¸ ê°œì…ì„ í¬ê¸°í•œ ì¥ì†Œ.
                <span style="color: rgba(255,255,255,.65);">
                  ì„±ì Â·ì¶œì„Â·êµì¹™ì€ ì¢…ì´ì— ì íŒ í˜•ì‹ì ì¸ ë†ë‹´ì— ë¶ˆê³¼í•˜ë‹¤.
                </span>
              </p>

              <p style="margin:0;">
                ê·¸ë¦¬ê³  ì´ ë„ì‹œì˜ í•œë³µíŒì—ì„œ,
                <b style="color: rgba(255,255,255,.92);">ìµœì•…ì˜ ë¬¸ì œ í•™êµë“¤</b>ì´ ì¡´ì¬í•œë‹¤.
              </p>
            </div>
          </div>

          <!-- =========================
               ğŸ“œ ìƒì¡´ ê·œì¹™ (Protocol) (YELLOW)
               ========================= -->
          <div style="
            background: var(--panel2);
            border: 1px solid rgba(255,255,255,.08);
            border-radius: 14px;
            padding: 14px 14px 15px;
            border-left: 6px solid var(--wYel);
          ">
            <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
              <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
                <div style="
                  display:inline-flex; align-items:center; gap:8px;
                  padding:7px 10px;
                  border-radius: 10px;
                  background: rgba(0,0,0,.22);
                  border: 1px solid rgba(255,255,255,.10);
                  font-weight:1000;
                  letter-spacing:.08em;
                ">
                  <span aria-hidden="true">ğŸ“œ</span>
                  <span>ìƒì¡´ ê·œì¹™</span>
                </div>

                <div style="
                  display:inline-flex; align-items:center; gap:8px;
                  padding:6px 10px;
                  border-radius: 999px;
                  background: rgba(255,255,255,.06);
                  border: 1px solid rgba(255,255,255,.10);
                  color: rgba(255,255,255,.68);
                  font-weight: 900;
                  letter-spacing: .06em;
                  font-size: 12px;
                ">
                  <span>Protocol</span>
                </div>
              </div>

              <div style="color: rgba(255,255,255,.45); font-size:12px; letter-spacing:.12em;">
                RULES
              </div>
            </div>

            <div style="margin-top:10px; color: rgba(255,255,255,.78); line-height:1.75; font-size:14px;">
              <div style="display:grid; gap:10px;">
                <div style="display:flex; gap:10px; align-items:flex-start;">
                  <div style="min-width:22px; font-weight:1000; color: rgba(255,255,255,.92);">01</div>
                  <div>ë¨¹íˆë˜ê°€, ì•„ë‹ˆë©´ <span style="color: var(--wRed); font-weight:1000;">ë¨¹ì–´ ì¹˜ì›Œë¼</span>.</div>
                </div>

                <div style="display:flex; gap:10px; align-items:flex-start;">
                  <div style="min-width:22px; font-weight:1000; color: rgba(255,255,255,.92);">02</div>
                  <div>ì‹¸ì›€ì€ â€˜ëâ€™ì´ ì•„ë‹ˆë¼ â€˜ì‹œì‘â€™ì´ë‹¤. ì´ê¸°ë©´ ë‹¤ìŒì´ ì˜¨ë‹¤.</div>
                </div>

                <div style="display:flex; gap:10px; align-items:flex-start;">
                  <div style="min-width:22px; font-weight:1000; color: rgba(255,255,255,.92);">03</div>
                  <div>ì •ìƒì€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ê°•ìë¥¼ ì“°ëŸ¬ëœ¨ë¦¬ë©´, ë” ê°•í•œ ì¡´ì¬ê°€ ë‚˜íƒ€ë‚œë‹¤.</div>
                </div>

                <div style="display:flex; gap:10px; align-items:flex-start;">
                  <div style="min-width:22px; font-weight:1000; color: rgba(255,255,255,.92);">04</div>
                  <div>ì‚´ì•„ë‚¨ì€ ìê°€ ê·œì¹™ì„ ì •ì˜í•œë‹¤. <span style="color: rgba(255,255,255,.92); font-weight:1000;">íŒ¨ì</span>ëŠ” ê¸°ë¡ì¡°ì°¨ ë‚¨ì§€ ì•ŠëŠ”ë‹¤.</div>
                </div>

                <div style="display:flex; gap:10px; align-items:flex-start;">
                  <div style="min-width:22px; font-weight:1000; color: rgba(255,255,255,.92);">05</div>
                  <div>ì´ë¦„ì´ ì•Œë ¤ì§„ ìˆœê°„, í‘œì ì´ ëœë‹¤.</div>
                </div>
              </div>

              <div style="margin-top:12px; color: rgba(255,255,255,.55); font-size:12px; letter-spacing:.06em;">
                â€» ìœ„ ê·œì¹™ì€ â€œì •ë‹µâ€ì´ ì•„ë‹ˆë¼ â€œìƒì¡´ì„ ìœ„í•œ ìµœì†Œì¹˜â€ë‹¤.
              </div>
            </div>
          </div>

          <!-- =========================
               ğŸ« í•™êµ ì²´ê³„ ë³´ê³  (Institution Overview) (GREEN)
               ========================= -->
          <div style="
            background: var(--panel2);
            border: 1px solid rgba(255,255,255,.08);
            border-radius: 14px;
            padding: 14px 14px 15px;
            border-left: 6px solid var(--wGrn);
          ">
            <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
              <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
                <div style="
                  display:inline-flex; align-items:center; gap:8px;
                  padding:7px 10px;
                  border-radius: 10px;
                  background: rgba(0,0,0,.22);
                  border: 1px solid rgba(255,255,255,.10);
                  font-weight:1000;
                  letter-spacing:.08em;
                ">
                  <span aria-hidden="true">ğŸ«</span>
                  <span>í•™êµ ì²´ê³„ ë³´ê³ </span>
                </div>

                <div style="
                  display:inline-flex; align-items:center; gap:8px;
                  padding:6px 10px;
                  border-radius: 999px;
                  background: rgba(255,255,255,.06);
                  border: 1px solid rgba(255,255,255,.10);
                  color: rgba(255,255,255,.68);
                  font-weight: 900;
                  letter-spacing: .06em;
                  font-size: 12px;
                ">
                  <span>Institution Overview</span>
                </div>
              </div>

              <div style="color: rgba(255,255,255,.45); font-size:12px; letter-spacing:.12em;">
                SYSTEM
              </div>
            </div>

            <div style="margin-top:10px; color: rgba(255,255,255,.78); line-height:1.85; font-size:14px;">
              <p style="margin:0 0 10px;">
                ì´ ë„ì‹œì— ì¡´ì¬í•˜ëŠ” í•™êµë“¤ì€
                <span style="color: var(--wYel); font-weight:1000;">ë” ì´ìƒ êµìœ¡ì„ ëª©ì ìœ¼ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤</span>.
                ëª…ëª©ìƒìœ¼ë¡œëŠ” â€˜í•™êµâ€™ë¼ëŠ” ì´ë¦„ì„ ìœ ì§€í•˜ê³  ìˆì§€ë§Œ,
                ì‹¤ì§ˆì ìœ¼ë¡œëŠ” <span style="color: rgba(255,255,255,.92); font-weight:1000;">ì„¸ë ¥ ë‹¨ìœ„</span>,
                í˜¹ì€ <span style="color: rgba(255,255,255,.92); font-weight:1000;">ì¡°ì§ì˜ ê±°ì </span>ì— ê°€ê¹ë‹¤.
              </p>

              <p style="margin:0 0 10px;">
                êµì‹¤ì€ íšŒì˜ì‹¤ì´ ë˜ì—ˆê³ , ë³µë„ëŠ” ì „ì¥ì´ ë˜ì—ˆìœ¼ë©°,
                ì²´ìœ¡ê´€ê³¼ ì˜¥ìƒì€ <span style="color: var(--wRed); font-weight:1000;">ì„œì—´ì„ ì¦ëª…í•˜ëŠ” ì¥ì†Œ</span>ë¡œ ë³€í–ˆë‹¤.
              </p>

              <p style="margin:0 0 10px;">
                í•™ìƒë“¤ì€ í•™ë…„ì´ë‚˜ ë°˜ì´ ì•„ë‹ˆë¼
                <span style="color: rgba(255,255,255,.92); font-weight:1000;">í˜</span>,
                <span style="color: rgba(255,255,255,.92); font-weight:1000;">ì˜í–¥ë ¥</span>,
                ê·¸ë¦¬ê³  <span style="color: var(--wGrn); font-weight:1000;">ì†Œì†</span>ìœ¼ë¡œ êµ¬ë¶„ëœë‹¤.
              </p>

              <p style="margin:0 0 10px;">
                <span style="color: var(--wYel); font-weight:1000;">í†µ</span>ì´ë¼ ë¶ˆë¦¬ëŠ” ì¡´ì¬ê°€ ì •ì ì— ì„œê³ ,
                ê·¸ ì•„ë˜ì— <span style="color: rgba(255,255,255,.92); font-weight:1000;">ëŒ€ì¥Â·ë¶€í†µÂ·ì¼ë°˜ í•™ìƒ</span>ì´ ë°°ì¹˜ëœë‹¤.
                ê·œì¹™ì€ í•™êµë§ˆë‹¤ ë‹¤ë¥´ë‹¤.
              </p>

              <p style="margin:0 0 10px;">
                ê·¸ëŸ¬ë‚˜ ê³µí†µì ì€ í•˜ë‚˜ë‹¤.
                <span style="color: rgba(255,255,255,.92); font-weight:1000;">ì•½ì</span>ëŠ” ë³´í˜¸ë°›ì§€ ëª»í•˜ê³ ,
                <span style="color: var(--wRed); font-weight:1000;">ê°•ì</span>ëŠ” ì–¸ì œë‚˜ ì‹œí—˜ë°›ëŠ”ë‹¤.
              </p>

              <p style="margin:0;">
                ì´ê³³ì—ì„œ í•™êµë€ ë°°ì›€ì„ ìœ„í•œ ê³µê°„ì´ ì•„ë‹ˆë¼,
                <span style="color: var(--wGrn); font-weight:1000;">ë²„í…¨ë‚¸ ìë§Œì´ ì´ë¦„ì„ ë‚¨ê¸¸ ìˆ˜ ìˆëŠ” ì‹œí—˜ì¥</span>ì´ë‹¤.
              </p>
            </div>
          </div>

        </div>
      </div>

      <!-- âœ… ì†Œì† ëˆŒë €ì„ ë•Œë§Œ ë³´ì„ (ê¸°ì¡´ ê·¸ëŒ€ë¡œ) -->
      <div class="archivePanel" id="factionPanel" style="display:none;">
        <div class="fPanelGrid">
          <!-- (ì´í•˜ ë‚´ìš© ë™ì¼ - ì›ë³¸ ê·¸ëŒ€ë¡œ) -->
          <!-- =========================
               ğŸ¦â€â¬› SUZURAN (BLACK)
               ========================= -->
          <div class="fCard" style="border-left:6px solid var(--fSuz);">
            <div class="fHeadRow">
              <div class="fBadgeRow">
                <div class="fBadge">
                  <span aria-hidden="true">ğŸ¦â€â¬›</span>
                  <span>ìŠˆì¦ˆë€ (Suzuran)</span>
                </div>
                <div class="fTag" style="color: rgba(255,255,255,.78);">
                  <span style="color: var(--accent); font-weight:1000;">"ìš°ë¦¬ë“¤ì€ ê¹Œë§ˆê·€ë‹¤."</span>
                </div>
              </div>
              <div class="fMeta">SCHOOL</div>
            </div>

            <div class="fBody">
              <p>
                <span class="fKey">íŠ¹ì§•:</span>
                ììœ ë¶„ë°©í•œ ë¶„ìœ„ê¸° ì†ì—ì„œ <span style="color: var(--accent); font-weight:1000;">ê°•í•¨</span>ì´ ê³§ ê·œì¹™ì´ë‹¤.
                í•™ë…„Â·ë°˜ë³´ë‹¤ <span class="fKey">ê°œì¸ì˜ í˜ê³¼ ëª…ì„±</span>ì´ ìš°ì„ ì´ë©°,
                <span style="color: rgba(255,255,255,.92); font-weight:1000;">ì†Œë¬¸ê³¼ í‰íŒ</span>ì´ ë¹ ë¥´ê²Œ í¼ì§„ë‹¤.
              </p>

              <p>
                <span class="fKey">í•™êµ ì†Œê°œ:</span>
                ì‚¬ëŒë“¤ì€ ê·¸ê³³ì„ <span style="color: var(--accent); font-weight:1000;">â€˜ê¹Œë§ˆê·€ ê³ ë“±í•™êµâ€™</span>ë¼ ë¶€ë¥¸ë‹¤.
                ì •ì‹ êµëª…ë³´ë‹¤ ê·¸ ë³„ëª…ì´ ë” ìœ ëª…í•˜ë‹¤.
                ì´ìœ ëŠ” ê°„ë‹¨í•˜ë‹¤. êµë¬¸ì„ ë„˜ëŠ” ìˆœê°„ë¶€í„°,
                <span style="color: rgba(255,255,255,.92); font-weight:1000;">ì¸ê°„ì´ ì¸ê°„ì„ ì‚¬ëŒ ì·¨ê¸‰í•˜ì§€ ì•ŠëŠ”</span>
                í’ê²½ì´ í¼ì³ì§€ê¸° ë•Œë¬¸ì´ë‹¤.
              </p>

              <p>
                ê²€ì€ êµë³µì´ë“ , ê°€ì£½ ì¬í‚·ì´ë“ , í›„ë“œë“ â€¦
                ë³µë„ì™€ ê³„ë‹¨ì— ë¬´ë¦¬ ì§€ì–´ ëŠ˜ì–´ì„  ë†ˆë“¤ì€ í•˜ë‚˜ê°™ì´
                ê¹Œë§ˆê·€ ë–¼ì²˜ëŸ¼ ê¹Œë§£ê³  ì‹œë„ëŸ½ë‹¤.
                <span style="color: rgba(255,255,255,.92); font-weight:1000;">ì›ƒìŒì€ ì¡°ë¡±</span>ì´ê³ ,
                <span style="color: rgba(255,255,255,.92); font-weight:1000;">ì¹œì ˆì€ ë¯¸ë¼</span>ë‹¤.
                ìƒì²˜ ëƒ„ìƒˆë¥¼ ë§¡ëŠ” ì†ë„ë§Œí¼ì€ ëˆ„êµ¬ë³´ë‹¤ ë¹ ë¥´ë‹¤.
              </p>

              <div class="fRule" style="color: rgba(255,255,255,.86);">
                ê·¸ë¦¬ê³  ê·¸ ê¹Œë§ˆê·€ë“¤ì€ <span style="color: var(--wRed); font-weight:1000;">ì•½í•œ ê±¸ ë³´ë©´ ê¼­ ìª¼ì•„ëŒ„ë‹¤</span>.
                í•œ ë²ˆ ìª¼ì´ë©´ ëì´ ì•„ë‹ˆë‹¤.
                í”¼ê°€ ë©ˆì¶œ ë•Œê¹Œì§€, ì£¼ë³€ ê¹Œë§ˆê·€ë“¤ì´ ë” ëª°ë ¤ì˜¨ë‹¤.
              </div>
            </div>
          </div>

          <!-- =========================
               ğŸ•Šï¸ HOSEN (BLUE)
               ========================= -->
          <div class="fCard" style="border-left:6px solid var(--fHos);">
            <div class="fHeadRow">
              <div class="fBadgeRow">
                <div class="fBadge">
                  <span aria-hidden="true">ğŸ•Šï¸</span>
                  <span>í˜¸ì… (HOSEN)</span>
                </div>
                <div class="fTag" style="color: rgba(255,255,255,.78);">
                  <span style="color: var(--accentHosen); font-weight:1000;">"ì§ˆì„œë¡œ ëˆ„ë¥´ê³ , ê·œìœ¨ë¡œ ë¬¶ëŠ”ë‹¤."</span>
                </div>
              </div>
              <div class="fMeta">SCHOOL</div>
            </div>

            <div class="fBody">
              <p>
                <span class="fKey">íŠ¹ì§•:</span>
                ì¡°ì§ë ¥ì´ ê°•í•˜ê³  <span style="color: var(--accentHosen); font-weight:1000;">ê·œì¹™</span>ì´ ëª…í™•í•˜ë‹¤.
                <span class="fKey">ìƒí•˜ê´€ê³„</span>ê°€ ë¶„ëª…í•˜ë©°, ì´ê³³ì—ì„œë„ ì‹¸ì›€ì€ ê¸ˆì§€ë˜ì§€ ì•ŠëŠ”ë‹¤.
                ë‹¤ë§Œ <span style="color: rgba(255,255,255,.92); font-weight:1000;">í—ˆë½ ì—†ëŠ” ì‹¸ì›€</span>ì´ ê¸ˆì§€ë  ë¿ì´ë‹¤.
                í˜¸ì…ì˜ ê·œì¹™ì€ ë‹¨ìˆœí•˜ë‹¤.
                <span style="color: var(--accentHosen); font-weight:1000;">â€œì§ˆì„œë¥¼ ì–´ê¸°ëŠ” ë†ˆì€, ì ì´ë‹¤.â€</span>
              </p>

              <p>
                <span class="fKey">í•™êµ ì†Œê°œ:</span>
                í˜¸ì…ì€ ê²‰ë³´ê¸°ì—” ê°€ì¥ <span style="color: rgba(255,255,255,.92); font-weight:1000;">â€˜ì •ìƒì ì¸ í•™êµâ€™</span>ì— ê°€ê¹ë‹¤.
                êµë³µì€ ë‹¨ì •í•˜ê³ , ë³µë„ëŠ” ì¡°ìš©í•˜ë©°, í•™ìƒë“¤ì€ ì •í•´ì§„ ë™ì„ ëŒ€ë¡œ ì›€ì§ì¸ë‹¤.
                í•˜ì§€ë§Œ ê·¸ ì§ˆì„œëŠ” <span style="color: var(--wYel); font-weight:1000;">ììœ¨</span>ì´ ì•„ë‹ˆë¼
                <span style="color: var(--accentHosen); font-weight:1000;">í†µì œ</span>ë¡œ ìœ ì§€ëœë‹¤.
              </p>

              <p>
                ì´ê³³ì˜ ì‹¸ì›€ì€ ìš°ë°œì ì´ì§€ ì•Šë‹¤.
                ëª¨ë“  ì¶©ëŒì€ <span class="fKey">ë³´ê³ </span>ë˜ê³ , <span class="fKey">ìŠ¹ì¸</span>ë˜ê³ , <span class="fKey">ì‹¤í–‰</span>ëœë‹¤.
                í—ˆë½ë°›ì§€ ì•Šì€ í­ë ¥ì€ ê·œì¹™ ìœ„ë°˜ì´ë©°,
                ê·œì¹™ ìœ„ë°˜ìëŠ” ê³§ <span style="color: rgba(255,255,255,.92); font-weight:1000;">ê³µë™ì˜ ì </span>ì´ ëœë‹¤.
              </p>

              <div class="fRule" style="color: rgba(255,255,255,.86);">
                í˜¸ì…ì—ì„œëŠ” <span style="color: rgba(255,255,255,.92); font-weight:1000;">í˜ë³´ë‹¤ ë³µì¢…</span>ì´ ë¨¼ì €ë‹¤.
                ê°œì¸ì˜ ê°ì •ì€ ì¤‘ìš”í•˜ì§€ ì•Šìœ¼ë©°, ëª…ë ¹ì€ í•­ìƒ ìœ„ì—ì„œ ì•„ë˜ë¡œ ë–¨ì–´ì§„ë‹¤.
                ì—¬ê¸°ì„œ ì‚´ì•„ë‚¨ëŠ” ë°©ë²•ì€ ë‹¨ í•˜ë‚˜.
                <span style="color: var(--accentHosen); font-weight:1000;">ê·œì¹™ì„ ë”°ë¥´ê±°ë‚˜, ê·œì¹™ì— ì˜í•´ ì œê±°ë˜ëŠ” ê²ƒ.</span>
              </div>
            </div>
          </div>

          <!-- =========================
               â˜ ï¸ BUSO (PURPLE)
               ========================= -->
          <div class="fCard" style="border-left:6px solid var(--fBus);">
            <div class="fHeadRow">
              <div class="fBadgeRow">
                <div class="fBadge">
                  <span aria-hidden="true">â˜ ï¸</span>
                  <span>ë¬´ì¥ì „ì„  (BUSO)</span>
                </div>
                <div class="fTag" style="color: rgba(255,255,255,.78);">
                  <span style="color: var(--accentBuso); font-weight:1000;">"ìš°ë¦° ë„ˆí¬ë“¤ ê°™ì€ ì›ìˆ­ì´ê°€ ì•„ë‹ˆì•¼."</span>
                </div>
              </div>
              <div class="fMeta">ALLIANCE</div>
            </div>

            <div class="fBody">
              <p>
                <span class="fKey">íŠ¹ì§•:</span>
                í•™êµ ë°”ê¹¥ì—ì„œ ì›€ì§ì´ëŠ” <span style="color: var(--accentBuso); font-weight:1000;">ì—°í•©</span> ì„¸ë ¥.
                í‡´í•™Â·ìí‡´ìë“¤ì„ ì¤‘ì‹¬ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìœ¼ë©°,
                <span class="fKey">ì‹¤ì „ ê°ê°</span>ì´ ë›°ì–´ë‚˜ë‹¤.
                ëª©ì ì„ ìœ„í•´ ìˆ˜ë‹¨ì„ ê°€ë¦¬ì§€ ì•Šìœ¼ë©°,
                ìŠˆì¦ˆë€ê³¼ í˜¸ì…ì„ â€˜ì •ìƒâ€™ë§Œ ë°”ë¼ë³´ë©° ë‹¬ë ¤ë“œëŠ”
                <span style="color: rgba(255,255,255,.92); font-weight:1000;">ë¯¸ì„±ìˆ™í•œ ì¡´ì¬</span>â€”ì¹¨íŒ¬ì§€ ì •ë„ë¡œ ì·¨ê¸‰í•œë‹¤.
              </p>

              <div class="fRule" style="color: rgba(255,255,255,.86);">
                ë¬´ì¥ì „ì„ ì€ í•™êµì— ì†í•˜ì§€ ì•ŠëŠ”ë‹¤.
                ì •í™•íˆ ë§í•˜ë©´, <span style="color: rgba(255,255,255,.92); font-weight:1000;">í•™êµë¼ëŠ” ê°œë…ì„ ì´ë¯¸ ë²„ë¦° ìë“¤</span>ì´ë‹¤.
                ê·¸ë“¤ì€ êµì‹¤ì—ì„œ ì‹¸ìš°ë‹¤ ì«“ê²¨ë‚œ ë†ˆë“¤,
                ê·œì¹™ì— ì§ˆë ¤ ë“±ì„ ëŒë¦° ë†ˆë“¤,
                í˜¹ì€ ê·œì¹™ì„ ë¶€ìˆ´ë²„ë¦° ë’¤ ë‚¨ì€ ì”í•´ë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.

                ë¬´ì¥ì „ì„ ì—ê²Œ í•™êµëŠ” ì „ì¥ì´ ì•„ë‹ˆë‹¤.
                <span style="color: var(--accentBuso); font-weight:1000;">ì´ë¯¸ ëë‚œ ì¥ì†Œ</span>ë‹¤.

                ê·¸ë“¤ì´ ì‹¸ìš°ëŠ” ê³³ì€ ê³¨ëª©, íê³µì¥, ê³ ê°€ë„ë¡œ ì•„ë˜â€”
                ë„ë§ì¹  ìˆ˜ ì—†ê³ , ì±…ì„ì§ˆ ì–´ë¥¸ë„ ì—†ëŠ” <span style="color: var(--wYel); font-weight:1000;">ì§„ì§œ ë°”ê¹¥</span>ì´ë‹¤.

                ìŠˆì¦ˆë€ì€ ë³¸ëŠ¥ìœ¼ë¡œ ë¤ë¹„ê³ ,
                í˜¸ì…ì€ ê·œì¹™ì— ê¸°ëŒ€ ì‹¸ìš´ë‹¤.
                í•˜ì§€ë§Œ ë¬´ì¥ì „ì„ ì€ ë‹¤ë¥´ë‹¤.
                ì´ë“¤ì€ ì‹¸ì›€ì„ ê³„ì‚°í•˜ê³ , <span style="color: var(--wRed); font-weight:1000;">ê²°ê³¼ë¥¼ ê°ë‹¹</span>í•œë‹¤.

                ê·¸ë“¤ì´ í•™êµë¥¼ ë¹„ì›ƒëŠ” ì´ìœ ëŠ” ë‹¨ìˆœí•˜ë‹¤.
                ì•„ì§ë„ ê·¸ ì•ˆì—ì„œ
                â€˜ìê¸°ë“¤ë¼ë¦¬ì˜ ì§ˆì„œâ€™ë¥¼ ì„¸ê³„ ì „ë¶€ë¼ ì°©ê°í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- âœ… ì¶”ê°€: BGM ëˆŒë €ì„ ë•Œë§Œ ë³´ì„ -->
      <div class="archivePanel" id="bgmPanel" style="display:none;">
        <div class="bgmGrid">
          <div class="bgmCard" style="border-left:6px solid var(--wYel);">
            <div class="bgmHead">
              <div class="bgmTitle"><span aria-hidden="true">ğŸµ</span><span>BGM ì»¨íŠ¸ë¡¤</span></div>
              <div class="bgmMeta">AUDIO</div>
            </div>

            <div class="bgmBody">
              <div style="color: rgba(255,255,255,.86); font-weight:1000; letter-spacing:.06em;">
                í˜„ì¬ íŠ¸ë™: <span id="bgmTrackName" style="color: var(--wYel);">reborn.mp3</span>
              </div>

              <div class="bgmRow">
                <button class="bgmBtn" id="bgmPlayBtn" type="button">PLAY</button>
                <button class="bgmBtn" id="bgmPauseBtn" type="button">PAUSE</button>
                <button class="bgmBtn" id="bgmStopBtn" type="button">STOP</button>
              </div>

              <div class="bgmRow">
                <div class="bgmRange">
                  <div style="font-weight:1000; letter-spacing:.08em;">VOL</div>
                  <input id="bgmVol" type="range" min="0" max="1" step="0.01" value="0.35" />
                  <div id="bgmVolText" style="min-width:52px; text-align:right; font-weight:1000; color: rgba(255,255,255,.82);">
                    35%
                  </div>
                </div>
              </div>

              <div class="bgmRow">
                <label class="bgmRange" style="justify-content:space-between;">
                  <div style="display:flex; align-items:center; gap:10px;">
                    <div style="font-weight:1000; letter-spacing:.08em;">LOOP</div>
                    <div class="bgmSmall">ëë‚˜ë©´ ìë™ ë°˜ë³µ</div>
                  </div>
                  <input id="bgmLoop" type="checkbox" />
                </label>
              </div>

              <!-- âœ… [ìš”ì²­ ìˆ˜ì •] ëª¨ë°”ì¼ ìë™ì¬ìƒ ì•ˆë‚´ ë¬¸êµ¬ ì‚­ì œ -->
            </div>
          </div>

          <div class="bgmCard" style="border-left:6px solid var(--wGrn);">
            <div class="bgmHead">
              <div class="bgmTitle"><span aria-hidden="true">ğŸ›ˆ</span><span>ìƒíƒœ</span></div>
              <div class="bgmMeta">STATUS</div>
            </div>

            <div class="bgmBody">
              <div style="display:grid; gap:10px;">
                <div style="display:flex; justify-content:space-between; gap:10px;">
                  <div class="bgmSmall">ì¬ìƒ ìƒíƒœ</div>
                  <div id="bgmState" style="font-weight:1000; color: rgba(255,255,255,.86);">PAUSED</div>
                </div>
                <div style="display:flex; justify-content:space-between; gap:10px;">
                  <div class="bgmSmall">í˜„ì¬ ì‹œê°„</div>
                  <div id="bgmTime" style="font-weight:1000; color: rgba(255,255,255,.86);">0:00</div>
                </div>
                <div style="display:flex; justify-content:space-between; gap:10px;">
                  <div class="bgmSmall">ì´ ê¸¸ì´</div>
                  <div id="bgmDur" style="font-weight:1000; color: rgba(255,255,255,.86);">-:--</div>
                </div>
              </div>

              <!-- âœ… [ìš”ì²­ ìˆ˜ì •] TIP ë°•ìŠ¤(ENTER/ëª¨ë°”ì¼ ì¬ìƒ ì•ˆë‚´) ì‚­ì œ -->
            </div>
          </div>

        </div>
      </div>

      <!-- âœ… ë“±ì¥ì¸ë¬¼ ëˆŒë €ì„ ë•Œë§Œ ë³´ì„ -->
      <div class="tabs" id="tabs" style="display:none;">
        <button class="tabBtn" data-f="SUZURAN">SUZURAN</button>
        <button class="tabBtn" data-f="HOSEN">HOSEN</button>
        <button class="tabBtn" data-f="BUSO">BUSO</button>
      </div>
    </div>

    <div class="sectionTitle" id="charactersTitle" style="display:none;">CHARACTERS</div>
    <div id="groups" style="display:none;"></div>
  </div>

  <div class="backdrop" id="backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Character Detail">
      <button class="closeBtn" id="closeBtn">CLOSE</button>

      <div class="modalGrid">
        <div class="modalLeft">
          <div class="portraitWrap">
            <img class="portrait" id="portrait" alt="character"/>
          </div>
        </div>

        <div class="modalRight">
          <div class="labelRow">
            <div class="factionLabel">
              <span class="factionDot" id="factionDot"></span>
              <span id="factionText">SUZURAN</span>
            </div>
            <div class="idLabel" id="idText">SUZ-01</div>
          </div>

          <h1 class="nameKR" id="nameKR">ì‚¬í‚¤</h1>
          <h2 class="nameEN" id="nameEN">Saki</h2>

          <div class="cards">
            <div class="infoCard">
              <div class="infoHead"><div class="infoTitle">BASIC</div></div>
              <div class="infoBody">
                <div class="kv">
                  <div class="k">ë°˜/ë‚˜ì´</div><div class="v" id="rowClassAge">-</div>
                  <div class="k">í¬ì§€ì…˜</div><div class="v" id="rowPos">-</div>
                </div>
              </div>
            </div>

            <div class="infoCard">
              <div class="infoHead"><div class="infoTitle">PERSONALITY</div></div>
              <div class="infoBody">
                <div class="kv">
                  <div class="k">ì„±ê²©</div><div class="v" id="rowPer">-</div>
                </div>
              </div>
            </div>

            <div class="infoCard noteWide">
              <div class="infoHead"><div class="infoTitle">NOTES</div></div>
              <div class="infoBody">
                <div class="quoteBox" id="rowQuote" style="--quoteColor: var(--accent);">
                  <span class="qMark">"</span><span id="quoteText"></span><span class="qMark">"</span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // âœ… MAIN VIDEO BG CONTROL
    // =========================
    const mainBgVideo = document.getElementById("mainBgVideo");

    function stopMainVideo(){
      if(!mainBgVideo) return;
      try{
        mainBgVideo.muted = true;
        mainBgVideo.volume = 0;
        mainBgVideo.pause();
        mainBgVideo.currentTime = 0;
      }catch(e){}
    }

    async function playMainVideo(){
      if(!mainBgVideo) return;
      try{
        mainBgVideo.muted = true;
        mainBgVideo.volume = 0;
        await mainBgVideo.play();
      }catch(err){
        console.log("Main video autoplay blocked or failed:", err);
      }
    }

    // =========================
    // ENTER / COVER
    // =========================
    const rootEl = document.documentElement;
    const coverEl = document.querySelector(".cover");
    const enterBtn = document.getElementById("enterBtn");
    let isEntered = false;

    function lockScroll(){
      rootEl.classList.add("scrollLock");
      document.body.classList.add("scrollLock");
      window.scrollTo(0,0);
    }
    function unlockScroll(){
      rootEl.classList.remove("scrollLock");
      document.body.classList.remove("scrollLock");
    }

    function blockScrollEvent(e){
      if(isEntered) return;
      e.preventDefault();
    }
    function blockKeys(e){
      if(isEntered) return;
      const keys = ["ArrowDown","ArrowUp","PageDown","PageUp","Home","End"," ","Spacebar"];
      if(keys.includes(e.key)) e.preventDefault();
    }

    window.addEventListener("wheel", blockScrollEvent, { passive:false });
    window.addEventListener("touchmove", blockScrollEvent, { passive:false });
    window.addEventListener("keydown", blockKeys);

    function showCover(noHistory){
      isEntered = false;
      document.body.classList.remove("entered");
      lockScroll();

      stopMainVideo();

      if(coverEl){
        coverEl.style.display = "flex";
        void coverEl.offsetHeight;
        coverEl.classList.remove("hidden");
      }
      window.scrollTo(0,0);

      if(!noHistory){
        history.replaceState({ screen:"cover" }, "", "#top");
      }
    }

    function enterMain(pushHistory){
      if(isEntered) return;
      isEntered = true;

      document.body.classList.add("entered");
      unlockScroll();
      window.scrollTo(0,0);

      if(coverEl){
        coverEl.classList.add("hidden");
        window.setTimeout(()=>{
          if(isEntered) coverEl.style.display = "none";
        }, 780);
      }

      playMainVideo();

      if(pushHistory){
        history.pushState({ screen:"main" }, "", "#main");
      }

      // âœ… [ìš”ì²­ ìˆ˜ì •] ENTERë¡œ ì§„ì…í•˜ë©´ "ì„¸ê³„ê´€" íƒ­ ìë™ ì˜¤í”ˆ
      try{ setWorldTab(true); }catch(e){}
    }

    if(history.state?.screen === "main" || location.hash === "#main"){
      isEntered = true;
      document.body.classList.add("entered");
      unlockScroll();
      if(coverEl){
        coverEl.style.display = "none";
        coverEl.classList.add("hidden");
      }
      history.replaceState({ screen:"main" }, "", "#main");

      playMainVideo();
    }else{
      showCover(true);
      history.replaceState({ screen:"cover" }, "", "#top");
    }

    window.addEventListener("popstate", (e)=>{
      const s = e.state?.screen;
      if(s === "main"){
        isEntered = true;
        document.body.classList.add("entered");
        unlockScroll();
        if(coverEl){
          coverEl.style.display = "none";
          coverEl.classList.add("hidden");
        }
        window.scrollTo(0,0);

        playMainVideo();

        // âœ… [ìš”ì²­ ìˆ˜ì •] ë’¤ë¡œ/ì•ìœ¼ë¡œë¡œ main ì§„ì…í•´ë„ "ì„¸ê³„ê´€" íƒ­ ìë™ ì˜¤í”ˆ
        try{ setWorldTab(true); }catch(e){}
      }else{
        showCover(true);
      }
    });

    // =========================
    // âœ… BGM
    // =========================
    const bgm = document.getElementById("bgm");
    if(bgm) bgm.volume = 0.35;

    async function startBgm(){
      if(!bgm) return;
      try{
        if(!bgm.paused) return;
        await bgm.play();
      }catch(err){
        console.log("BGM play blocked or failed:", err);
      }
    }

    // âœ… loop ì²´í¬ì— ë§ì¶° ì¢…ë£Œë™ì‘ ì²˜ë¦¬
    if(bgm){
      bgm.addEventListener("ended", ()=>{
        if(bgm.loop) return;
        bgm.pause();
        bgm.currentTime = 0;
      });
    }

    if(enterBtn){
      enterBtn.addEventListener("click", (e)=>{
        e.preventDefault();
        startBgm();
        enterMain(true);
      });
    }

    // âœ… [ìš”ì²­ ìˆ˜ì •] ì»¤ë²„ í™”ë©´ ì•„ë¬´ ê³³ì´ë‚˜ í´ë¦­/í„°ì¹˜í•´ë„ ë©”ì¸ìœ¼ë¡œ ì§„ì…
    if(coverEl){
      coverEl.addEventListener("click", (e)=>{
        if(isEntered) return;
        if(e.target.closest("#enterBtn")) return; // ENTER ë²„íŠ¼ì€ ê¸°ì¡´ ë¡œì§ ìœ ì§€
        startBgm();
        enterMain(true);
      });
    }

    window.addEventListener("pointerdown", startBgm, { once:true });

    // =========================
    // âœ… SELECT ARCHIVE: ì„¸ê³„ê´€ / ì†Œì† / ë“±ì¥ì¸ë¬¼ / BGM í† ê¸€
    // =========================
    const tabsEl = document.getElementById("tabs");
    const charTabBtn = document.getElementById("charTabBtn");
    const groupsEl = document.getElementById("groups");

    const worldTabBtn = document.getElementById("worldTabBtn");
    const worldPanel = document.getElementById("worldPanel");

    const factionTabBtn = document.getElementById("factionTabBtn");
    const factionPanel = document.getElementById("factionPanel");

    // âœ… ì¶”ê°€: BGM íƒ­ ìš”ì†Œ
    const bgmTabBtn = document.getElementById("bgmTabBtn");
    const bgmPanel = document.getElementById("bgmPanel");

    const charactersTitle = document.getElementById("charactersTitle");

    let isCharTabOpen = false;
    let isWorldTabOpen = false;
    let isFactionTabOpen = false;
    let isBgmTabOpen = false; // âœ… ì¶”ê°€

    let hasSelectedFaction = false;
    let currentFaction = null;

    function setCharactersSectionVisible(on){
      const show = !!on;
      if(charactersTitle) charactersTitle.style.display = show ? "block" : "none";
      if(groupsEl) groupsEl.style.display = show ? "block" : "none";
    }

    function clearCharacters(){
      if(groupsEl) groupsEl.innerHTML = "";
    }
    function clearTabActive(){
      document.querySelectorAll(".tabBtn").forEach(b=> b.classList.remove("active"));
    }

    function setWorldTab(open){
      isWorldTabOpen = !!open;

      if(worldPanel) worldPanel.style.display = isWorldTabOpen ? "block" : "none";
      if(worldTabBtn) worldTabBtn.classList.toggle("active", isWorldTabOpen);

      if(isWorldTabOpen){
        setCharTab(false);
        setFactionTab(false);
        setBgmTab(false); // âœ… ì¶”ê°€
        setCharactersSectionVisible(false);
      }
    }

    function setFactionTab(open){
      isFactionTabOpen = !!open;

      if(factionPanel) factionPanel.style.display = isFactionTabOpen ? "block" : "none";
      if(factionTabBtn) factionTabBtn.classList.toggle("active", isFactionTabOpen);

      if(isFactionTabOpen){
        setWorldTab(false);
        setCharTab(false);
        setBgmTab(false); // âœ… ì¶”ê°€
        setCharactersSectionVisible(false);
      }
    }

    function setBgmTab(open){
      isBgmTabOpen = !!open;

      if(bgmPanel) bgmPanel.style.display = isBgmTabOpen ? "block" : "none";
      if(bgmTabBtn) bgmTabBtn.classList.toggle("active", isBgmTabOpen);

      if(isBgmTabOpen){
        setWorldTab(false);
        setFactionTab(false);
        setCharTab(false);
        setCharactersSectionVisible(false);
      }
    }

    function setCharTab(open){
      isCharTabOpen = !!open;

      if(tabsEl) tabsEl.style.display = isCharTabOpen ? "flex" : "none";
      if(charTabBtn) charTabBtn.classList.toggle("active", isCharTabOpen);

      if(isCharTabOpen){
        if(isWorldTabOpen) setWorldTab(false);
        if(isFactionTabOpen) setFactionTab(false);
        if(isBgmTabOpen) setBgmTab(false); // âœ… ì¶”ê°€
        setCharactersSectionVisible(true);
      }

      if(!isCharTabOpen){
        hasSelectedFaction = false;
        currentFaction = null;
        clearTabActive();
        clearCharacters();
        setCharactersSectionVisible(false);
      }else{
        if(!hasSelectedFaction){
          currentFaction = null;
          clearTabActive();
          clearCharacters();
        }
      }
    }

    if(worldTabBtn){
      worldTabBtn.addEventListener("click", ()=>{
        setWorldTab(!isWorldTabOpen);
      });
    }

    if(factionTabBtn){
      factionTabBtn.addEventListener("click", ()=>{
        setFactionTab(!isFactionTabOpen);
      });
    }

    if(charTabBtn){
      charTabBtn.addEventListener("click", ()=>{
        setCharTab(!isCharTabOpen);
      });
    }

    // âœ… ì¶”ê°€: BGM íƒ­ í´ë¦­
    if(bgmTabBtn){
      bgmTabBtn.addEventListener("click", ()=>{
        setBgmTab(!isBgmTabOpen);
      });
    }

    // ì´ˆê¸° ìƒíƒœ
    setWorldTab(false);
    setFactionTab(false);
    setCharTab(false);
    setBgmTab(false); // âœ… ì¶”ê°€
    clearCharacters();
    setCharactersSectionVisible(false);

    // âœ… [ìš”ì²­ ìˆ˜ì •] í˜ì´ì§€ê°€ ì´ë¯¸ mainìœ¼ë¡œ ì—´ë¦° ê²½ìš°ì—ë„ ì„¸ê³„ê´€ ìë™ ì˜¤í”ˆ
    if(isEntered){
      setWorldTab(true);
    }

    // =========================
    // âœ… BGM UI ì»¨íŠ¸ë¡¤ (ì¶”ê°€)
    // =========================
    const bgmPlayBtn = document.getElementById("bgmPlayBtn");
    const bgmPauseBtn = document.getElementById("bgmPauseBtn");
    const bgmStopBtn = document.getElementById("bgmStopBtn");

    const bgmVol = document.getElementById("bgmVol");
    const bgmVolText = document.getElementById("bgmVolText");
    const bgmLoop = document.getElementById("bgmLoop");

    const bgmState = document.getElementById("bgmState");
    const bgmTime = document.getElementById("bgmTime");
    const bgmDur = document.getElementById("bgmDur");

    const bgmTrackName = document.getElementById("bgmTrackName");

    function fmtTime(sec){
      if(!isFinite(sec) || sec < 0) return "-:--";
      const m = Math.floor(sec / 60);
      const s = Math.floor(sec % 60);
      return `${m}:${String(s).padStart(2,"0")}`;
    }

    function updateBgmUi(){
      if(!bgm) return;
      if(bgmState) bgmState.textContent = bgm.paused ? "PAUSED" : "PLAYING";
      if(bgmTime) bgmTime.textContent = fmtTime(bgm.currentTime || 0);
      if(bgmDur) bgmDur.textContent = fmtTime(bgm.duration);
    }

    if(bgm){
      // íŠ¸ë™ëª… í‘œì‹œ(í˜„ì¬ src ê¸°ì¤€)
      try{
        const src = bgm.currentSrc || bgm.querySelector("source")?.getAttribute("src") || "";
        const name = src ? src.split("/").pop() : "bgm";
        if(bgmTrackName) bgmTrackName.textContent = name;
      }catch(e){}

      if(bgmVol){
        bgmVol.value = String(bgm.volume ?? 0.35);
        if(bgmVolText) bgmVolText.textContent = `${Math.round((bgm.volume ?? 0.35) * 100)}%`;
      }
    }

    if(bgmPlayBtn){
      bgmPlayBtn.addEventListener("click", async ()=>{
        await startBgm();
        updateBgmUi();
      });
    }
    if(bgmPauseBtn){
      bgmPauseBtn.addEventListener("click", ()=>{
        if(!bgm) return;
        bgm.pause();
        updateBgmUi();
      });
    }
    if(bgmStopBtn){
      bgmStopBtn.addEventListener("click", ()=>{
        if(!bgm) return;
        bgm.pause();
        bgm.currentTime = 0;
        updateBgmUi();
      });
    }

    if(bgmVol){
      bgmVol.addEventListener("input", ()=>{
        if(!bgm) return;
        const v = Math.max(0, Math.min(1, Number(bgmVol.value)));
        bgm.volume = v;
        if(bgmVolText) bgmVolText.textContent = `${Math.round(v * 100)}%`;
      });
    }

    if(bgmLoop){
      bgmLoop.addEventListener("change", ()=>{
        if(!bgm) return;
        bgm.loop = !!bgmLoop.checked;
      });
    }

    if(bgm){
      bgm.addEventListener("play", updateBgmUi);
      bgm.addEventListener("pause", updateBgmUi);
      bgm.addEventListener("timeupdate", updateBgmUi);
      bgm.addEventListener("loadedmetadata", updateBgmUi);
    }
    updateBgmUi();

    // =========================
    // ìºë¦­í„° ë°ì´í„° / ë Œë” / ëª¨ë‹¬
    // =========================
    const characters = [
      /* ========================= SUZURAN ========================= */
      { id:"SUZ-01", faction:"SUZURAN", img:"assets/suzuran/SUZ-01.png",
        nameKR:"ì‚¬í‚¤", nameEN:"Saki", age:"17ì„¸", classInfo:"1í•™ë…„ 1-A", position:"1-A ëŒ€ì¥",
        personality:"í™œë°œÂ·ë°ìŒÂ·ì±…ì„ê°",
        quoteColor:"#ffcc00",
        quote:`ë‚´ê°€ ì•ì— ì„œë©´, ë‹¤ë“¤ ì•ˆ ë‹¤ì¹œë‹¤.`
      },
      { id:"SUZ-02", faction:"SUZURAN", img:"assets/suzuran/SUZ-02.png",
        nameKR:"ì•„ì˜¤ì´", nameEN:"Aoi", age:"17ì„¸", classInfo:"1í•™ë…„ 1-A", position:"í•™ìƒ",
        personality:"ë„ë„í•¨Â·ë¬´ì‹¬Â·ê±°ë¦¬ê°",
        quoteColor:"#8fd3ff",
        quote:`ë‚œ ê·¸ëƒ¥â€¦ ì¡°ìš©íˆ ì§€ë‚˜ê°€ê³  ì‹¶ì–´.`
      },
      { id:"SUZ-03", faction:"SUZURAN", img:"assets/suzuran/SUZ-03.png",
        nameKR:"íˆë‚˜", nameEN:"Hina", age:"17ì„¸", classInfo:"1í•™ë…„ 1-A", position:"ì‚¬ê³ ë­‰ì¹˜",
        personality:"ì²œì§„ë‚œë§ŒÂ·ì§ì„¤Â·ì‚¬ê³ ë­‰ì¹˜",
        quoteColor:"#ff6aa6",
        quote:`ì–´? ë‚˜ ë•Œë¬¸ì´ì•¼? â€¦ì•„ë‹Œë°!`
      },
      { id:"SUZ-04", faction:"SUZURAN", img:"assets/suzuran/SUZ-04.png",
        nameKR:"ë‚˜ë‚˜ì„¸", nameEN:"Nanase", age:"18ì„¸", classInfo:"2í•™ë…„ 2-A", position:"2-A ëŒ€ì¥",
        personality:"ë°ìŒÂ·ëª…ë‘í•¨Â·ì• êµ",
        quoteColor:"#ffa84a",
        quote:`ê·¸ê±° ì¬ë°Œê² ë‹¤. ë‚˜ë„ ê»´!`
      },
      { id:"SUZ-05", faction:"SUZURAN", img:"assets/suzuran/SUZ-05.png",
        nameKR:"ì½”í•˜ë£¨", nameEN:"Koharu", age:"18ì„¸", classInfo:"2í•™ë…„ 2-A", position:"í˜ìˆ¨ì°",
        personality:"ì†Œì‹¬Â·ë‚´ì„±ì Â·í˜ìˆ¨ì°",
        quoteColor:"#ffd1e8",
        quote:`ë‚˜â€¦ ë‚˜ë„ í•  ìˆ˜ ìˆì–´. ì•„ë§ˆë„â€¦`
      },
      { id:"SUZ-06", faction:"SUZURAN", img:"assets/suzuran/SUZ-06.png",
        nameKR:"ë¯¸ì‚¬í‚¤", nameEN:"Misaki", age:"18ì„¸", classInfo:"2í•™ë…„ 2-A", position:"ì •ìƒì¸",
        personality:"ì°¨ë¶„Â·ë¬´ë‚œÂ·í˜„ì‹¤ì ",
        quoteColor:"#c9c9c9",
        quote:`ê²°ë¡ ë§Œ ë§í•´. ì‹œê°„ ë‚­ë¹„ëŠ” ì‹«ì–´.`
      },
      { id:"SUZ-07", faction:"SUZURAN", img:"assets/suzuran/SUZ-07.png",
        nameKR:"ë ˆì´ì¹´", nameEN:"Reika", age:"19ì„¸", classInfo:"3í•™ë…„ 3-A", position:"ìŠˆì¦ˆë€ í†µ",
        personality:"ëŠê¸‹Â·ê²Œìœ¼ë¦„Â·ì‚¬êµì„±",
        quoteColor:"#ff3b3b",
        quote:`ë‚˜ ì°¸.. ê·€ì°®ê²Œ..\nì • ì•ˆ ë êº¼ê°™ìœ¼ë©´ ë‚  ë¶€ë¥´ë¼ê³ .\níŒì¹˜ê¸°ë‚˜ í•˜ì.`
      },
      { id:"SUZ-08", faction:"SUZURAN", img:"assets/suzuran/SUZ-08.png",
        nameKR:"ë¯¸ì½”", nameEN:"Miko", age:"19ì„¸", classInfo:"3í•™ë…„ 3-A", position:"ì†Œì‹í†µ",
        personality:"ìˆ˜ë‹¤Â·ê´‘ëŒ€ê¸°ì§ˆÂ·ëˆˆì¹˜ì—†ìŒ",
        quoteColor:"#b58cff",
        quote:`ë‚˜ì•¼ ë‚˜! ëª¨ë“  ì†Œì‹ê³¼ ì†Œë¬¸ì€ ë‚˜ ë¯¸ì½”ë¡œë¶€í„° ì‹œì‘ë˜ëŠ”ê±°ë¼ê³ !!`
      },
      { id:"SUZ-09", faction:"SUZURAN", img:"assets/suzuran/SUZ-09.png",
        nameKR:"ìœ ë©”", nameEN:"Yume", age:"19ì„¸", classInfo:"3í•™ë…„ 3-B", position:"í•™ìƒ",
        personality:"ì• êµÂ·ê°ì„±Â·ì˜ì‚ì§",
        quoteColor:"#ffd6f2",
        quote:`ì¹­ì°¬â€¦ í•´ì£¼ë©´ ë” ì—´ì‹¬íˆ í•  ìˆ˜ë„ ìˆëŠ”ë°?`
      },
      { id:"SUZ-10", faction:"SUZURAN", img:"assets/suzuran/SUZ-10.png",
        nameKR:"ì¹´ì—ë°", nameEN:"Kaede", age:"19ì„¸", classInfo:"3í•™ë…„ 3-B", position:"ë¶€í†µ",
        personality:"ê³„ì‚°ì Â·ì¸¤ë°ë ˆ",
        quoteColor:"#45d36a",
        quote:`ì‹¸ì›€ì„ í”¼í•œë‹¤ê³ ? ë„ˆ ê²Œì´ëƒ?`
      },

      /* ========================= HOSEN ========================= */
      { id:"HOS-01", faction:"HOSEN", img:"assets/hosen/hos-01.png",
        nameKR:"ë¯¸ì¦ˆí‚¤", nameEN:"Mizuki", age:"17ì„¸", classInfo:"1í•™ë…„ 1-A", position:"1-Aë°˜ ëŒ€ì¥",
        personality:"ë°ìŒÂ·í™œë°œÂ·ì„ ì§€í‚´Â·ì¥ë‚œê¸°",
        quoteColor:"#56b6ff",
        quote:`ê·œì¹™ì€ ì§€í‚¤ë˜, ì¬ë¯¸ëŠ” ë†“ì¹˜ì§€ ë§ì!`
      },
      { id:"HOS-02", faction:"HOSEN", img:"assets/hosen/hos-02.png",
        nameKR:"ë§ˆì´", nameEN:"Mai", age:"17ì„¸", classInfo:"1í•™ë…„ 1-A", position:"1-Aë°˜ í•™ìƒ",
        personality:"ì°¨ë¶„Â·ì¡°ìš©Â·ê·œì¹™ì¤‘ì‹œÂ·ë‹¨ë‹µ",
        quoteColor:"#a0ffcf",
        quote:`ì“¸ë°ì—†ëŠ” ë§, í•„ìš” ì—†ì–´.`
      },
      { id:"HOS-03", faction:"HOSEN", img:"assets/hosen/hos-03.png",
        nameKR:"ì•„ì¹´ë¦¬", nameEN:"Akari", age:"17ì„¸", classInfo:"1í•™ë…„ 1-A", position:"1-Aë°˜ í•™ìƒ",
        personality:"ì¸¤ë°ë ˆÂ·ê¹Œì¹ Â·ë‚´í–¥Â·í‘œí˜„ì„œíˆ¼",
        quoteColor:"#ff6aa6",
        quote:`ì°©ê°í•˜ì§€ ë§ˆâ€¦ ë„ì™€ì£¼ëŠ” ê±° ì•„ëƒ.`
      },
      { id:"HOS-04", faction:"HOSEN", img:"assets/hosen/hos-04.png",
        nameKR:"ì•„ì¹´ë„¤", nameEN:"Akane", age:"18ì„¸", classInfo:"2í•™ë…„ 2-A", position:"2-Aë°˜ ëŒ€ì¥",
        personality:"ë¬´ì‹ ê²½Â·ë°©ì¢…Â·ê³µê²©ì Â·ê·€ì°®ìŒ",
        quoteColor:"#ff8a3d",
        quote:`ì§ˆì„œ? ê·¸ëŸ° ê±° ì§€í‚¤ë¼ê³  ìˆëŠ” ì¤„ ëª°ëëŠ”ë°.`
      },
      { id:"HOS-05", faction:"HOSEN", img:"assets/hosen/hos-05.png",
        nameKR:"íˆë¹„í‚¤", nameEN:"Hibiki", age:"18ì„¸", classInfo:"2í•™ë…„ 2-A", position:"2-Aë°˜ í•™ìƒ",
        personality:"ì˜¨í™”Â·ë°°ë ¤Â·ìˆœí•¨Â·ê±±ì •ë§ìŒ",
        quoteColor:"#b58cff",
        quote:`ë‹¤ì¹œ ë°ëŠ” ì—†ì–´?â€¦ ì ê¹ë§Œ, ë‚´ê°€ ë³¼ê²Œ.`
      },
      { id:"HOS-06", faction:"HOSEN", img:"assets/hosen/hos-06.png",
        nameKR:"ìœ ì¹´", nameEN:"Yuka", age:"18ì„¸", classInfo:"2í•™ë…„ 2-A", position:"í˜¸ì… í†µ ì¹œë™ìƒ",
        personality:"ìœ ì¾ŒÂ·í˜¸ê¸°ì‹¬Â·í…ì…˜ë†’ìŒÂ·ê°¸ë£¨",
        quoteColor:"#ffd24d",
        quote:`ì˜¤~ ê·¸ê±° ë­ì•¼? ë‚˜ë„ ê»´! ì§€ê¸ˆ!`
      },
      { id:"HOS-07", faction:"HOSEN", img:"assets/hosen/hos-07.png",
        nameKR:"ìœ í‚¤", nameEN:"Yuki", age:"19ì„¸", classInfo:"3í•™ë…„ 3-A", position:"í˜¸ì… í†µ",
        personality:"ì—„ê²©Â·ì±…ì„ê°Â·í†µì†”Â·ë‹¨í˜¸",
        quoteColor:"#ff3b3b",
        quote:`ì§ˆì„œëŠ” ì§€ì¼œë¼. ì˜ˆì™¸ëŠ” ì—†ë‹¤.`
      },
      { id:"HOS-08", faction:"HOSEN", img:"assets/hosen/hos-08.png",
        nameKR:"ë¦¬ì½”", nameEN:"Riko", age:"19ì„¸", classInfo:"3í•™ë…„ 3-A", position:"3-Aë°˜ í•™ìƒ",
        personality:"ì¥ë‚œê¸°Â·í™œë°œÂ·í…ì…˜Â·ë¶„ìœ„ê¸°ë©”ì´ì»¤",
        quoteColor:"#ff5df1",
        quote:`ì•¼~ ë¶„ìœ„ê¸° ì£½ì˜€ë„¤? ë‚´ê°€ ì‚´ë ¤ì¤„ê²Œ!`
      },
      { id:"HOS-09", faction:"HOSEN", img:"assets/hosen/hos-09.png",
        nameKR:"ì¹´ë‚˜", nameEN:"Kana", age:"19ì„¸", classInfo:"3í•™ë…„ 3-B", position:"í˜¸ì… ë¶€í†µ",
        personality:"ì†Œì‹¬Â·ì„±ì‹¤Â·ëˆê¸°Â·ë§·ì§‘",
        quoteColor:"#45d36a",
        quote:`ë‚˜â€¦ ê´œì°®ì•„. ì•„ì§â€¦ ì•ˆ ì“°ëŸ¬ì¡Œì–´.`
      },
      { id:"HOS-10", faction:"HOSEN", img:"assets/hosen/hos-10.png",
        nameKR:"ìš°íƒ€", nameEN:"Uta", age:"19ì„¸", classInfo:"3í•™ë…„ 3-B", position:"í˜¸ì… ì†Œì‹í†µ",
        personality:"ì—‰ëš±Â·ë°œë„Â·ê³¼ë‹¤ìˆ˜ë‹¤Â·ìš¸ë³´",
        quoteColor:"#7bdcff",
        quote:`ë­ì–´~? ëˆ„êµ¬ ë‹®ì•˜ë‹¤ê³ ?? êº„í•˜~ ê¸°ë¶„íƒ“ì´ì•¼!`
      },

      /* ========================= BUSO ========================= */
      { id:"BUSO-01", faction:"BUSO", img:"assets/buso/BUSO-01.png",
        nameKR:"ë¥˜ì„¸ì´", nameEN:"Ryusei", age:"19ì„¸", classInfo:"ìŠˆì¦ˆë€ ìí‡´", position:"ì—°í•©ì›",
        personality:"ëƒ‰ì •Â·ê³„ì‚°ì Â·ë˜‘ë¶€ëŸ¬ì§Â·ê±°ì¹¨ì—†ìŒ (ê³„ì‚°í˜• ì‹¸ì›€ê¾¼)",
        quoteColor:"#ff3b3b",
        quote:`ê³„ì‚° ëë‚¬ì–´. ë‚¨ì€ ì„ íƒì§€ëŠ” í•˜ë‚˜ì§€.`
      },
      { id:"BUSO-02", faction:"BUSO", img:"assets/buso/BUSO-02.png",
        nameKR:"í…Œì¸ ì•¼", nameEN:"Tetsuya", age:"19ì„¸", classInfo:"ìŠˆì¦ˆë€ ìí‡´", position:"ì—°í•©ì›",
        personality:"ì¿¨í•¨Â·í„¸í„¸í•¨Â·ë‹´ë‹´í•¨Â·ëŠê¸‹í•¨ (ë‚œí­í˜• ì‹¸ì›€ê¾¼)",
        quoteColor:"#ff3b3b",
        quote:`ë§ì€ í•„ìš” ì—†ì–´. ê·¸ëƒ¥ ëë‚´ì.`
      },
      { id:"BUSO-03", faction:"BUSO", img:"assets/buso/BUSO-03.png",
        nameKR:"ì•„ì•¼í† ", nameEN:"Ayato", age:"19ì„¸", classInfo:"í˜¸ì… ìí‡´", position:"ì—°í•©ì›",
        personality:"ì¹¨ì°©Â·ë…¼ë¦¬ì Â·ë¶€ë“œëŸ¬ì›€Â·ì •ì¤‘í•¨ (ë§ì´ ë¨¼ì €ì¸ íƒ€ì…)",
        quoteColor:"#ff3b3b",
        quote:`ëŒ€í™”ê°€ ë¨¼ì €ì£ . ë“£ì§€ ì•Šìœ¼ë©´â€¦ ê·¸ë‹¤ìŒì€ ê°„ë‹¨í•©ë‹ˆë‹¤.`
      },
      { id:"BUSO-04", faction:"BUSO", img:"assets/buso/BUSO-04.png",
        nameKR:"ì¹´ì œì˜¤", nameEN:"Kazeo", age:"19ì„¸", classInfo:"í˜¸ì… ìí‡´", position:"ì—°í•©ì› ëŒ€ì¥",
        personality:"ê³µê²©ì Â·ì˜¤ë§ŒÂ·ë¹„ì›ƒë“¯ ê±°ì¹¨ì—†ìŒ (ì„ ê³µí˜• íŒŒê´´ì)",
        quoteColor:"#ff3b3b",
        quote:`ë‚´ê°€ ë¨¼ì € ê°„ë‹¤. ë§‰ì„ ìˆ˜ ìˆìœ¼ë©´ ë§‰ì•„ë´.`
      },
    ];

    const factionLabelMap = {
      SUZURAN: "ìŠˆì¦ˆë€",
      HOSEN: "í˜¸ì…",
      BUSO: "ë¬´ì¥ì „ì„ ",
    };

    let activePeekCard = null;

    function makeCard(c){
      const div = document.createElement("div");
      div.className = "charCard locked";
      div.dataset.id = c.id;

      div.innerHTML = `
        <img class="thumb" src="${c.img}" alt="${c.id}">
        <div class="glitchOverlay" aria-hidden="true"></div>
        <div class="charOverlay">
          <div class="charId">${c.id}</div>
          <div class="charLine">${c.nameKR} Â· ${c.position}</div>
        </div>
      `;

      div.addEventListener("click", ()=>{
        if(activePeekCard && activePeekCard !== div){
          activePeekCard.classList.remove("peek","revealFlash");
        }
        activePeekCard = div;
        div.classList.add("peek","revealFlash");
        window.setTimeout(()=> div.classList.remove("revealFlash"), 420);

        openModal(c);
      });

      return div;
    }

    function render(){
      if(!currentFaction){
        clearCharacters();
        return;
      }

      groupsEl.innerHTML = "";
      const filtered = characters.filter(c=> c.faction === currentFaction);

      const head = document.createElement("div");
      head.className = "groupHead";
      head.innerHTML = `
        <div class="groupName">${factionLabelMap[currentFaction] || currentFaction}</div>
        <div class="groupCount">${filtered.length}</div>
      `;
      groupsEl.appendChild(head);

      const grid = document.createElement("div");
      grid.className = "grid";
      filtered.forEach(c=> grid.appendChild(makeCard(c)));
      groupsEl.appendChild(grid);
    }

    if(tabsEl){
      tabsEl.addEventListener("click", (e)=>{
        const btn = e.target.closest(".tabBtn");
        if(!btn) return;

        clearTabActive();
        btn.classList.add("active");

        currentFaction = btn.dataset.f;
        hasSelectedFaction = true;

        render();
      });
    }

    // =========================
    // MODAL
    // =========================
    const backdrop = document.getElementById("backdrop");
    const closeBtn = document.getElementById("closeBtn");

    const portrait = document.getElementById("portrait");
    const factionText = document.getElementById("factionText");
    const idText = document.getElementById("idText");
    const nameKR = document.getElementById("nameKR");
    const nameEN = document.getElementById("nameEN");

    const rowClassAge = document.getElementById("rowClassAge");
    const rowPos = document.getElementById("rowPos");
    const rowPer = document.getElementById("rowPer");

    const quoteBox = document.getElementById("rowQuote");
    const quoteText = document.getElementById("quoteText");

    const factionDot = document.getElementById("factionDot");

    function openModal(c){
      portrait.src = c.img;

      factionText.textContent = factionLabelMap[c.faction] || (c.faction || "-");
      idText.textContent = c.id || "-";
      nameKR.textContent = c.nameKR || "-";
      nameEN.textContent = c.nameEN || "";

      factionDot.classList.remove("blue","red");
      if(c.faction === "HOSEN") factionDot.classList.add("blue");
      if(c.faction === "BUSO") factionDot.classList.add("red");

      rowClassAge.textContent = `${c.classInfo || "-"} / ${c.age || "-"}`;
      rowPos.textContent = c.position || "-";
      rowPer.textContent = c.personality || "-";

      const qc = c.quoteColor || "#ffcc00";
      quoteBox.style.setProperty("--quoteColor", qc);
      quoteText.textContent = c.quote || "â€¦";

      backdrop.classList.add("show");
      backdrop.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closeModal(){

      backdrop.classList.remove("show");
      backdrop.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";

      if(activePeekCard){
        activePeekCard.classList.remove("peek","revealFlash");
        activePeekCard = null;
      }
    }

    closeBtn.addEventListener("click", closeModal);
    backdrop.addEventListener("click", (e)=>{
      if(e.target === backdrop) closeModal();
    });
    window.addEventListener("keydown", (e)=>{
      if(e.key === "Escape") closeModal();
    });
  </script>
</body>
</html>
```î¨0î¨‚